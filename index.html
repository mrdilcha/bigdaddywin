<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prediction System</title>
  <script src="https://cdn.jsdelivr.net/npm/react@18/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 flex items-center justify-center h-screen">

  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    const generateOutcomes = () => {
      const outcomes = [];
      const numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
      
      let lastNum = numbers[Math.floor(Math.random() * numbers.length)];
      let secondLastNum = numbers[Math.floor(Math.random() * numbers.length)];
      
      for (let i = 0; i < 10000; i++) {
        let size, color, nextNumber;
        const sum = lastNum + secondLastNum;
        
        if (sum > 10) {
          nextNumber = Math.random() < 0.8 ? 
            numbers.slice(5).sort(() => 0.5 - Math.random())[0] :  
            numbers.slice(0, 5).sort(() => 0.5 - Math.random())[0];
        } else {
          nextNumber = Math.random() < 0.8 ? 
            numbers.slice(0, 5).sort(() => 0.5 - Math.random())[0] : 
            numbers.slice(5).sort(() => 0.5 - Math.random())[0];
        }
        
        size = nextNumber >= 5 ? 'Big' : 'Small';
        
        if (lastNum % 2 === 0 && secondLastNum % 2 === 0) {
          color = Math.random() < 0.7 ? 'Red' : 'Green';
        } else if (lastNum % 2 === 1 && secondLastNum % 2 === 1) {
          color = Math.random() < 0.7 ? 'Green' : 'Red';
        } else {
          color = Math.random() < 0.5 ? 'Red' : 'Green';
        }
        
        outcomes.push({
          secondLast: secondLastNum,
          last: lastNum,
          result: { size, color, number: nextNumber }
        });
        
        secondLastNum = lastNum;
        lastNum = nextNumber;
      }
      
      return outcomes;
    };

    const analyzePatterns = (outcomes) => {
      const patterns = {};
      
      outcomes.forEach(outcome => {
        const key = `${outcome.secondLast},${outcome.last}`;
        if (!patterns[key]) {
          patterns[key] = {
            big: 0,
            small: 0,
            red: 0,
            green: 0,
            numbers: Array(10).fill(0),
            total: 0
          };
        }
        
        patterns[key][outcome.result.size.toLowerCase()]++;
        patterns[key][outcome.result.color.toLowerCase()]++;
        patterns[key].numbers[outcome.result.number]++;
        patterns[key].total++;
      });
      
      return patterns;
    };

    const PredictionSystem = () => {
      const [lastNumber, setLastNumber] = useState('');
      const [secondLastNumber, setSecondLastNumber] = useState('');
      const [prediction, setPrediction] = useState(null);
      const [patterns, setPatterns] = useState(null);
      const [confidence, setConfidence] = useState(null);
      const [loading, setLoading] = useState(false);

      useEffect(() => {
        const outcomes = generateOutcomes();
        const analyzedPatterns = analyzePatterns(outcomes);
        setPatterns(analyzedPatterns);
      }, []);

      const validateInput = (value) => {
        const num = parseInt(value);
        return !isNaN(num) && num >= 0 && num <= 9;
      };

      const handleReset = () => {
        setLastNumber('');
        setSecondLastNumber('');
        setPrediction(null);
        setConfidence(null);
      };

      const handlePredict = async () => {
        if (!validateInput(lastNumber) || !validateInput(secondLastNumber)) {
          setPrediction({ error: 'Please enter valid numbers (0-9)' });
          return;
        }

        setLoading(true);
        await new Promise(resolve => setTimeout(resolve, 1500));

        const key = `${secondLastNumber},${lastNumber}`;
        const patternData = patterns[key];

        if (patternData) {
          const total = patternData.total;
          
          const size = patternData.big > patternData.small ? 'Big' : 'Small';
          const color = patternData.red > patternData.green ? 'Red' : 'Green';
          
          const mostLikelyNumber = patternData.numbers
            .map((count, index) => ({ number: index, count }))
            .sort((a, b) => b.count - a.count)[0].number;
          
          const sizeConfidence = Math.round((Math.max(patternData.big, patternData.small) / total) * 100);
          const colorConfidence = Math.round((Math.max(patternData.red, patternData.green) / total) * 100);
          const numberConfidence = Math.round((patternData.numbers[mostLikelyNumber] / total) * 100);
          
          setPrediction({ size, color, number: mostLikelyNumber });
          setConfidence({ size: sizeConfidence, color: colorConfidence, number: numberConfidence });
        } else {
          setPrediction({ error: 'No pattern data available for these numbers' });
          setConfidence(null);
        }
        
        setLoading(false);
      };

      return (
        <div className="bg-white p-6 rounded-lg shadow-lg max-w-md mx-auto">
          <h1 className="text-2xl font-bold mb-4">Prediction System</h1>
          <div className="mb-4">
            <label className="block text-gray-700">Second Last Number</label>
            <input
              type="number"
              className="w-full border-gray-300 rounded-lg p-2"
              value={secondLastNumber}
              onChange={(e) => setSecondLastNumber(e.target.value)}
              placeholder="Enter number (0-9)"
            />
          </div>
          <div className="mb-4">
            <label className="block text-gray-700">Last Number</label>
            <input
              type="number"
              className="w-full border-gray-300 rounded-lg p-2"
              value={lastNumber}
              onChange={(e) => setLastNumber(e.target.value)}
              placeholder="Enter number (0-9)"
            />
          </div>
          <button
            onClick={handlePredict}
            className="bg-blue-500 text-white p-2 rounded-lg w-full mb-4"
            disabled={loading}
          >
            {loading ? 'Predicting...' : 'Predict'}
          </button>
          <button onClick={handleReset} className="bg-gray-300 text-black p-2 rounded-lg w-full">
            Reset
          </button>
          {prediction && !prediction.error && (
            <div className="mt-4">
              <p>Number: {prediction.number} ({confidence?.number}%)</p>
              <p>Size: {prediction.size} ({confidence?.size}%)</p>
              <p>Color: {prediction.color} ({confidence?.color}%)</p>
            </div>
          )}
          {prediction?.error && (
            <p className="text-red-500 mt-4">{prediction.error}</p>
          )}
        </div>
      );
    };

    ReactDOM.render(<PredictionSystem />, document.getElementById('root'));
  </script>
</body>
</html>
